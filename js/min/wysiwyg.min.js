(function(){var t,e;t=this.jQuery||require("jquery"),e=function(){function e(e){var n,i,o;this.options=null!=e?e:{},this.el=t("<div />"),o=this.options;for(n in o)i=o[n],this[n]=i;this.el.addClass(this.className),this.delegateEvents(this.events),this.render()}return e.prototype.className="wysiwyg",e.prototype.events={"click [data-type=bold]":"bold","click [data-type=italic]":"italic","click [data-type=list]":"list","click [data-type=link]":"link","click [data-type=h1]":"h1","click [data-type=h2]":"h2","click a":"cancel"},e.prototype.document=document,e.prototype.render=function(){return this.el.empty(),this.el.append('<a href="#" data-type="bold">Bold</a>'),this.el.append('<a href="#" data-type="italic">Italic</a>'),this.el.append('<a href="#" data-type="link">Link</a>'),this.el.append('<a href="#" data-type="h1">Pealkiri</a>'),this.el.append('<a href="#" data-type="h2">Alapealkiri</a>'),this},e.prototype.bold=function(t){return t.preventDefault(),this.exec("bold")},e.prototype.italic=function(t){return t.preventDefault(),this.selectTest()?this.exec("italic"):void 0},e.prototype.list=function(t){return t.preventDefault(),this.exec("insertUnorderedList")},e.prototype.link=function(t){var e,n;return t.preventDefault(),this.selectTest()&&(e="http://",n=window.getSelection().focusNode.parentElement,(null!=n?n.href:void 0)&&(e=n.href),this.exec("unlink"),e=prompt("Enter a link:",e),e&&"http://"!==e)?(/:\/\//.test(e)||(e="http://"+e),this.exec("createLink",e)):void 0},e.prototype.h1=function(t){return t.preventDefault(),"h1"===this.query("formatBlock")?this.exec("formatBlock","p"):this.exec("formatBlock","h1")},e.prototype.h2=function(t){return t.preventDefault(),"h2"===this.query("formatBlock")?this.exec("formatBlock","p"):this.exec("formatBlock","h2")},e.prototype.move=function(t){return this.el.css(t)},e.prototype.cancel=function(t){return t.preventDefault(),t.stopImmediatePropagation()},e.prototype.getSelectedText=function(){var t;return(null!=(t=this.document)?t.selection:void 0)?document.selection.createRange().text:this.document?document.getSelection().toString():void 0},e.prototype.selectTest=function(){return 0===this.getSelectedText().length?(alert("Select some text first."),!1):!0},e.prototype.exec=function(t,e){return null==e&&(e=null),this.document.execCommand(t,!1,e)},e.prototype.query=function(t){return this.document.queryCommandValue(t)},e.prototype.delegateEvents=function(t){var e,n,i,o,r,l,a=this;l=[];for(n in t)o=t[n],"function"!=typeof o&&(o=function(t){return function(){return a[t].apply(a,arguments),!0}}(o)),i=n.match(/^(\S+)\s*(.*)$/),e=i[1],r=i[2],""===r?l.push(this.el.bind(e,o)):l.push(this.el.delegate(r,e,o));return l},e}(),"undefined"!=typeof module&&null!==module?module.exports=e:this.Wysiwyg=e}).call(this);